{"version":3,"sources":["webpack://NgwUploader/webpack/universalModuleDefinition","webpack://NgwUploader/webpack/bootstrap","webpack://NgwUploader/(webpack)/buildin/global.js","webpack://NgwUploader/../ngw-connector/lib/ngw-connector.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/events/events.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/timers-browserify/main.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/setimmediate/setImmediate.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/process/browser.js","webpack://NgwUploader/./src/utils.ts","webpack://NgwUploader/./src/decorators.ts","webpack://NgwUploader/./src/ngw-uploader.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","global","setImmediate","__generator","thisArg","body","f","y","_","label","sent","trys","ops","next","verb","throw","return","iterator","v","op","TypeError","done","pop","length","push","step","commonjsGlobal","self","fn","createCommonjsModule","assign","configurable","writable","arguments","a","keys","b","getOwnPropertyDescriptor","constructor","then","resolve","reject","_state","_handled","_value","undefined","_deferreds","u","_immediateFn","onFulfilled","onRejected","promise","apply","_unhandledRejectionFn","setTimeout","all","Array","slice","race","console","warn","Error","Promise","OPTIONS","route","NgwConnector","options","_loadingQueue","_loadingStatus","connect","_arguments","P","generator","fulfilled","rejected","result","__awaiter","_a","login","password","_this","_b","auth","getUserInfo","makeQuery","client","makeClientId","headers","Authorization","Access-Control-Allow-Origin","Access-Control-Allow-Headers","data","log","keyname","clientId","localStorage","setItem","JSON","stringify","btoa","unescape","encodeURIComponent","request","params","apiItems","apiItem","url","shift","replaceParams","fry","arg","template","post","method","baseUrl","replace","_setLoadingQueue","_getJson","_executeLoadingQueue","catch","er","waiting","timestamp","Date","isError","queue","wait","callback","error","xhr","XMLHttpRequest","open","X","XDomainRequest","createCORSRequest","onreadystatechange","readyState","status","responseText","parse","message","onerror","upload","onprogress","lengthComputable","percentComplete","loaded","total","onProgress","h","setRequestHeader","withCredentials","file","FormData","append","send","loadJSON","templateRe","str","EventEmitter","_events","_maxListeners","isFunction","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNumber","isNaN","emit","type","handler","len","args","listeners","err","context","addListener","listener","newListener","warned","trace","on","once","fired","removeListener","list","position","splice","removeAllListeners","listenerCount","evlistener","emitter","scope","Timeout","id","clearFn","_id","_clearFn","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","toString","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","Math","random","onGlobalMessage","event","source","indexOf","addEventListener","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","createElement","html","documentElement","script","removeChild","appendChild","installReadyStateChangeImplementation","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","noop","title","browser","env","argv","version","versions","off","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","evented","target","propertyKey","descriptor","originalMethod","_i","eventBegin","state","resp","eventEnd","eventError","ngw_uploader_NgwUploader","NgwUploader","inputOptions","events","__assign","connector","ngw_connector","createInput","input","setAttribute","innerHTML","uploadPromise","uploadRaster","files","success","fileUpload","meta","createName","addTimestampToName","toISOString","createResource","newRes","createStyle","resource","cls","display_name","parent","parentId","raster_layer","mime_type","size","srs","Accept","styleData","description","newStyle","createWms","wmsData","resmeta","items","wmsserver_service","layers","resource_id","min_scale_denom","max_scale_denom","toFixed","eventProgress","upload_meta","__decorate","File","__webpack_exports__"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,UAAAH,GACA,iBAAAC,QACAA,QAAA,YAAAD,IAEAD,EAAA,YAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAT,YAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,mBClFA,IAAAC,EAGAA,EAAA,WACA,OAAAC,KADA,GAIA,IAEAD,KAAAE,SAAA,cAAAA,KAAA,EAAAC,MAAA,QACC,MAAAC,GAED,iBAAAxC,SAAAoC,EAAApC,QAOAH,EAAAD,QAAAwC,oBCnBA,SAAAK,EAAAC,IAAA,SAAAD,EAAA9C,GACgEA,EAAAC,GADhE,CAICyC,EAAA,SAAAzC,GAA4B;;;;;;;;;;;;;;oFA0B7B,SAAA+C,EAAAC,EAAAC,GACA,IAA4GC,EAAAC,EAAAzB,EAAAc,EAA5GY,GAAiBC,MAAA,EAAAC,KAAA,WAA6B,KAAA5B,EAAA,SAAAA,EAAA,GAA0B,OAAAA,EAAA,IAAe6B,QAAAC,QACvF,OAAAhB,GAAoBiB,KAAAC,EAAA,GAAAC,MAAAD,EAAA,GAAAE,OAAAF,EAAA,IAAqD,mBAAAnC,SAAAiB,EAAAjB,OAAAsC,UAAA,WAAoE,OAAApB,OAAeD,EAC5J,SAAAkB,EAAAzB,GAA0B,gBAAA6B,GAAsB,OAChD,SAAAC,GACA,GAAAb,EAAA,UAAAc,UAAA,mCACA,KAAAZ,GAAA,IACA,GAAAF,EAAA,EAAAC,IAAAzB,EAAA,EAAAqC,EAAA,GAAAZ,EAAA,OAAAY,EAAA,GAAAZ,EAAA,SAAAzB,EAAAyB,EAAA,SAAAzB,EAAAf,KAAAwC,GAAA,GAAAA,EAAAM,SAAA/B,IAAAf,KAAAwC,EAAAY,EAAA,KAAAE,KAAA,OAAAvC,EAEA,OADAyB,EAAA,EAAAzB,IAAAqC,GAAA,EAAAA,EAAA,GAAArC,EAAAD,QACAsC,EAAA,IACA,cAAArC,EAAAqC,EAA2C,MAC3C,OAAsC,OAAtCX,EAAAC,SAA+C5B,MAAAsC,EAAA,GAAAE,MAAA,GAC/C,OAAAb,EAAAC,QAAsCF,EAAAY,EAAA,GAAWA,GAAA,GAAU,SAC3D,OAAAA,EAAAX,EAAAI,IAAAU,MAA6Cd,EAAAG,KAAAW,MAAc,SAC3D,QACA,KAAAxC,KAAA0B,EAAAG,MAAAY,OAAA,GAAAzC,IAAAyC,OAAA,UAAAJ,EAAA,QAAAA,EAAA,KAAiHX,EAAA,EAAO,SACxH,OAAAW,EAAA,MAAArC,GAAAqC,EAAA,GAAArC,EAAA,IAAAqC,EAAA,GAAArC,EAAA,KAAoF0B,EAAAC,MAAAU,EAAA,GAAiB,MACrG,OAAAA,EAAA,IAAAX,EAAAC,MAAA3B,EAAA,IAA4D0B,EAAAC,MAAA3B,EAAA,GAAgBA,EAAAqC,EAAQ,MACpF,GAAArC,GAAA0B,EAAAC,MAAA3B,EAAA,IAAkD0B,EAAAC,MAAA3B,EAAA,GAAgB0B,EAAAI,IAAAY,KAAAL,GAAgB,MAClFrC,EAAA,IAAA0B,EAAAI,IAAAU,MACAd,EAAAG,KAAAW,MAAqC,SAErCH,EAAAd,EAAAtC,KAAAqC,EAAAI,GACa,MAAAR,GAAYmB,GAAA,EAAAnB,GAAaO,EAAA,EAAS,QAAUD,EAAAxB,EAAA,EACzD,KAAAqC,EAAA,SAAAA,EAAA,GAAuC,OAAStC,MAAAsC,EAAA,GAAAA,EAAA,UAAAE,MAAA,GArBAI,EAAApC,EAAA6B,MAyBhD,IAAAQ,EAAA,oBAAAlE,mBAAA,IAAAyC,IAAA,oBAAA0B,cAEA,SAAAC,EAAAvE,GACoCuE,EAApCvE,GAAsBD,YAAcC,EAAAD,SAGpCyE,CAAA,SAAAxE,EAAAD,GACAkB,OAAAwD,QAAAxD,OAAAC,eAAAD,OAAA,UAA8DE,YAAA,EAAAuD,cAAA,EAAAC,UAAA,EAAAnD,MAAA,SAAAmB,EAAAtB,GAAyE,SAAAsB,EAAA,UAAAoB,UAAA,2CAA+E,QAAAtC,EAAAR,OAAA0B,GAAAX,EAAA,EAA+BA,EAAA4C,UAAAV,OAAsBlC,IAAA,CAAO,IAAAhB,EAAA4D,UAAA5C,GAAsB,SAAAhB,EAAA,QAAA6D,EAAA5D,OAAA6D,KAAA7D,OAAAD,IAAAJ,EAAA,EAAAmE,EAAAF,EAAAX,OAAyEtD,EAAAmE,EAAOnE,IAAA,CAAO,IAAAL,EAAAsE,EAAAjE,GAAAJ,EAAAS,OAAA+D,yBAAAhE,EAAAT,QAAyD,IAAAC,KAAAW,aAAAM,EAAAlB,GAAAS,EAAAT,KAAmD,OAAAkB,KAuBnd,WAAc,SAAAkB,KAAc,IAAAX,EAAAQ,KAAAyC,YAAuB,OAAAzC,KAAA0C,KAAA,SAAAzD,GAA6B,OAAAO,EAAAmD,QAAAxC,KAAAuC,KAAA,WAAsC,OAAAzD,KAAW,SAAAA,GAAa,OAAAO,EAAAmD,QAAAxC,KAAAuC,KAAA,WAAsC,OAAAlD,EAAAoD,OAAA3D,OAAuB,SAAAO,KAAc,SAAAP,EAAAkB,GAAc,KAAAH,gBAAAf,GAAA,UAAAsC,UAAA,wCAAoF,sBAAApB,EAAA,UAAAoB,UAAA,kBAA8DvB,KAAA6C,OAAA,EAAA7C,KAAA8C,UAAA,EAAA9C,KAAA+C,YAAAC,EAAAhD,KAAAiD,cAAAC,EAAA/C,EAAAH,MAAmF,SAAAxB,EAAA2B,EAAAX,GAAgB,KAAK,IAAAW,EAAA0C,QAAa1C,IAAA4C,OAAY,IAAA5C,EAAA0C,QAAA1C,EAAA2C,UAAA,EAAA7D,EAAAkE,aAAA,WAAsD,IAAAlE,EAAA,IAAAkB,EAAA0C,OAAArD,EAAA4D,YAAA5D,EAAA6D,WAA8C,UAAApE,EAAA,CAAa,IAAAT,EAAM,IAAIA,EAAAS,EAAAkB,EAAA4C,QAAe,MAAAtC,GAAS,YAAA1C,EAAAyB,EAAA8D,QAAA7C,GAA2B5B,EAAAW,EAAA8D,QAAA9E,QAAgB,IAAA2B,EAAA0C,OAAAhE,EAAAd,GAAAyB,EAAA8D,QAAAnD,EAAA4C,WAA4C5C,EAAA8C,WAAAtB,KAAAnC,GAAyB,SAAAX,EAAAsB,EAAAX,GAAgB,IAAI,GAAAA,IAAAW,EAAA,UAAAoB,UAAA,6CAA0E,GAAA/B,IAAA,iBAAAA,GAAA,mBAAAA,GAAA,CAAkD,IAAAhB,EAAAgB,EAAAkD,KAAa,GAAAlD,aAAAP,EAAA,OAAAkB,EAAA0C,OAAA,EAAA1C,EAAA4C,OAAAvD,OAAAiB,EAAAN,GAAyD,sBAAA3B,EAAA,YAAA0E,EAAA,SAAA/C,EAAAX,GAAoD,kBAAkBW,EAAAoD,MAAA/D,EAAA4C,YAAtE,CAA6F5D,EAAAgB,GAAAW,GAASA,EAAA0C,OAAA,EAAA1C,EAAA4C,OAAAvD,EAAAiB,EAAAN,GAA4B,MAAAtB,GAASd,EAAAoC,EAAAtB,IAAS,SAAAd,EAAAoC,EAAAX,GAAgBW,EAAA0C,OAAA,EAAA1C,EAAA4C,OAAAvD,EAAAiB,EAAAN,GAA4B,SAAAM,EAAAN,GAAc,IAAAA,EAAA0C,QAAA,IAAA1C,EAAA8C,WAAAvB,QAAAzC,EAAAkE,aAAA,WAAiEhD,EAAA2C,UAAA7D,EAAAuE,sBAAArD,EAAA4C,UAAiD,QAAAvD,EAAA,EAAAX,EAAAsB,EAAA8C,WAAAvB,OAAkC7C,EAAAW,EAAIA,IAAAhB,EAAA2B,IAAA8C,WAAAzD,IAAyBW,EAAA8C,WAAA,KAAmB,SAAAC,EAAA/C,EAAAX,GAAgB,IAAAP,GAAA,EAAS,IAAIkB,EAAA,SAAAA,GAAclB,OAAA,EAAAJ,EAAAW,EAAAW,KAAkB,SAAAA,GAAalB,OAAA,EAAAlB,EAAAyB,EAAAW,MAAqB,MAAA3B,GAAS,GAAAS,EAAA,OAAYA,GAAA,EAAAlB,EAAAyB,EAAAhB,IAAc,IAAAJ,EAAAqF,WAAiBxE,EAAAU,UAAA,eAAAQ,GAAiC,OAAAH,KAAA0C,KAAA,KAAAvC,IAAyBlB,EAAAU,UAAA+C,KAAA,SAAAvC,EAAAlB,GAAgC,IAAAJ,EAAA,IAAAmB,KAAAyC,YAAAjD,GAA8B,OAAAhB,EAAAwB,KAAA,aAAAG,EAAAX,EAAAP,GAAkCe,KAAAoD,YAAA,mBAAAjD,IAAA,KAAAH,KAAAqD,WAAA,mBAAA7D,IAAA,KAAAQ,KAAAsD,QAAArE,EAAlC,CAA2IkB,EAAAlB,EAAAJ,OAAWI,EAAAU,UAAA,QAAAQ,EAAAlB,EAAAyE,IAAA,SAAAvD,GAA4C,WAAAlB,EAAA,SAAAO,EAAAP,GAA2B,SAAAT,EAAA2B,EAAAM,GAAgB,IAAI,GAAAA,IAAA,iBAAAA,GAAA,mBAAAA,GAAA,CAAkD,IAAAyC,EAAAzC,EAAAiC,KAAa,sBAAAQ,EAAA,YAAAA,EAAAhF,KAAAuC,EAAA,SAAAjB,GAAyDhB,EAAA2B,EAAAX,IAAQP,GAAIJ,EAAAsB,GAAAM,EAAA,KAAA1C,GAAAyB,EAAAX,GAAqB,MAAAT,GAASa,EAAAb,IAAO,IAAA+B,QAAA,IAAAA,EAAAuB,OAAA,UAAAH,UAAA,gCAAwF,IAAA1C,EAAA8E,MAAAhE,UAAAiE,MAAA1F,KAAAiC,GAAoC,OAAAtB,EAAA6C,OAAA,OAAAlC,MAA6B,QAAAzB,EAAAc,EAAA6C,OAAAjB,EAAA,EAAuB5B,EAAA6C,OAAAjB,EAAWA,IAAAjC,EAAAiC,EAAA5B,EAAA4B,OAAiBxB,EAAA0D,QAAA,SAAAxC,GAAuB,OAAAA,GAAA,iBAAAA,KAAAsC,cAAAxD,EAAAkB,EAAA,IAAAlB,EAAA,SAAAO,GAAoEA,EAAAW,MAAQlB,EAAA2D,OAAA,SAAAzC,GAAsB,WAAAlB,EAAA,SAAAO,EAAAP,GAA2BA,EAAAkB,MAAQlB,EAAA4E,KAAA,SAAA1D,GAAoB,WAAAlB,EAAA,SAAAO,EAAAP,GAA2B,QAAAT,EAAA,EAAAK,EAAAsB,EAAAuB,OAAuB7C,EAAAL,EAAIA,IAAA2B,EAAA3B,GAAAkE,KAAAlD,EAAAP,MAAsBA,EAAAkE,aAAA,mBAAA9C,GAAA,SAAAF,GAA6DE,EAAAF,KAAiB,SAAAA,GAAc/B,EAAA+B,EAAA,IAAQlB,EAAAuE,sBAAA,SAAArD,QAAqC,IAAA2D,0BAAAC,KAAA,wCAAA5D,IAAqF,IAAAnC,EAAA,WAAiB,uBAAA8D,KAAA,OAAAA,KAAwC,uBAAAnE,OAAA,OAAAA,OAA4C,YAAAkE,EAAA,OAAAA,EAA4D,MAAAmC,MAAA,kCAAjK,GAAkN,YAAAhG,IAAAiG,QAAAtE,UAAA,UAAA3B,EAAAiG,QAAAtE,UAAA,QAAAQ,GAAAnC,EAAAiG,QAAAhF,EAAv4FO,KAxBnB,IA2BA0E,GACAC,MAAA,gCAEAC,EAAA,WACA,SAAAA,EAAAC,GACArE,KAAAqE,WACArE,KAAAsE,iBACAtE,KAAAuE,kBACAvE,KAAAqE,QAAA5F,OAAAwD,UAA2CiC,EAAAG,OAoJ3C,OAlJAD,EAAAzE,UAAA6E,QAAA,WACA,OAjFA,SAAAjE,EAAAkE,EAAAC,EAAAC,GACA,WAAAD,MAAAT,UAAA,SAAAtB,EAAAC,GACA,SAAAgC,EAAA5F,GAAuC,IAAM4C,EAAA+C,EAAA3D,KAAAhC,IAA+B,MAAAmB,GAAYyC,EAAAzC,IACxF,SAAA0E,EAAA7F,GAAsC,IAAM4C,EAAA+C,EAAA,MAAA3F,IAAmC,MAAAmB,GAAYyC,EAAAzC,IAC3F,SAAAyB,EAAAkD,GAAmCA,EAAAtD,KAAAmB,EAAAmC,EAAA9F,OAAA,IAAA0F,EAAA,SAAA/B,GAAiEA,EAAAmC,EAAA9F,SAAyB0D,KAAAkC,EAAAC,GAC7HjD,GAAA+C,IAAApB,MAAAhD,EAAAkE,QAAAzD,UA4EA+D,CAAA/E,UAAA,oBACA,IAAAgF,EAAAC,EAAAC,EACAC,EAAAnF,KACA,OAAAM,EAAAN,KAAA,SAAAoF,GACA,OAAAA,EAAAxE,OACA,OACA,OAAAZ,KAAAmE,OACA,EAAAF,QAAAtB,QAAA3C,KAAAmE,SADA,KAEA,OACA,OAAAnE,KAAAqE,QAAAgB,MACAL,EAAAhF,KAAAqE,QAAAgB,KAAAJ,EAAAD,EAAAC,MAAAC,EAAAF,EAAAE,SACAD,GAAAC,GACA,EAAAlF,KAAAsF,gBADA,OAFA,KAIA,OACAF,EAAAvE,OACAuE,EAAAxE,MAAA,EACA,gBAAAZ,KAAAuF,UAAAvF,KAAAqE,QAAAF,aAAoFzB,KAAA,SAAAyB,GAEpF,OADAgB,EAAAhB,QACAA,KAEA,gBAAAiB,EAAAvE,cAKAuD,EAAAzE,UAAA2F,YAAA,WACA,IAAAH,EAAAnF,KACAwF,EAAAxF,KAAAyF,eACA,OAAAzF,KAAAuF,UAAA,uCACAG,SACAC,cAAA,SAAAH,EACAI,8BAAA,IACAC,+BAAA,KAEA3G,KAAA,SACawD,KAAA,SAAAoD,GACbhC,QAAAiC,IAAAD,GACA,UAAAA,EAAAE,UACAF,EAAAG,SAAAd,EAAAM,eACAS,cACAA,aAAAC,QAAA,SAAAC,KAAAC,UAAAP,QAKA1B,EAAAzE,UAAA8F,aAAA,WACA,IAAAT,EAAAhF,KAAAqE,QAAAgB,KAAAJ,EAAAD,EAAAC,MAAAC,EAAAF,EAAAE,SACA,OAAAvH,OAAA2I,KAAAC,SAAAC,mBAAAvB,EAAA,IAAAC,MAEAd,EAAAzE,UAAA8G,QAAA,SAAAnI,EAAAoI,EAAArC,GACA,IAAAc,EAAAnF,KACA,OAAAA,KAAAwE,UAAA9B,KAAA,SAAAiE,GACA,QAAAtE,KAAAsE,EACA,GAAAA,EAAA/G,eAAAyC,IACAA,IAAA/D,EAAA,CACA,IAAAsI,EAAAD,EAAAtE,GAAAuB,QACAiD,EAAAD,EAAAE,QACA,GAAAF,EAAAlF,OAAA,CACAgF,QAEA,IADA,IAAAK,KACAC,EAAA,EAAiDA,EAAAJ,EAAAlF,OAAsBsF,IAAA,CACvE,IAAAC,EAAAL,EAAAI,GAEA,GADAD,EAAAC,GAAA,IAA2DC,EAAA,SAC3DjE,IAAA0D,EAAAO,GACA,UAAAjD,MAAA,IAAAiD,EAAA,uCAGAJ,EAAAK,EAAAL,EAAAE,GAEA,OAAA5B,EAAAI,UAAAsB,EAAAH,EAAArC,OAMAD,EAAAzE,UAAAwH,KAAA,SAAA7I,EAAA+F,EAAAqC,GAGA,OAFArC,SACA+C,OAAA,OACApH,KAAAyG,QAAAnI,EAAAoI,EAAArC,IAEAD,EAAAzE,UAAA4F,UAAA,SAAAsB,EAAAH,EAAArC,GACA,IAAAc,EAAAnF,KAEA,GADA6G,GAAA7G,KAAAqE,QAAAgD,QAAArH,KAAAqE,QAAAgD,QAAA,IAAAR,EAMA,OAJAH,IACAG,EAAAK,EAAAL,EAAAH,IAEAG,IAAAS,QAAA,qBACAtH,KAAAuE,eAAAsC,IAaA7G,KAAAuE,eAAAsC,IAAA,EACA,IAAA5C,QAAA,SAAAtB,EAAAC,GACAuC,EAAAoC,iBAAAV,EAAAlE,EAAAC,OAdA5C,KAAAuE,eAAAsC,IAAA,EACA7G,KAAAwH,SAAAX,EAAAxC,GAAA3B,KAAA,SAAAoD,GAGA,OAFAX,EAAAZ,eAAAsC,IAAA,EACA1B,EAAAsC,qBAAAZ,EAAAf,GACAA,IACqB4B,MAAA,SAAAC,GAGrB,MAFAxC,EAAAZ,eAAAsC,IAAA,EACA1B,EAAAsC,qBAAAZ,EAAAc,GAAA,GACAA,KAYA,UAAA3D,MAAA,qCAAA1F,OAGA8F,EAAAzE,UAAA4H,iBAAA,SAAAjJ,EAAAqE,EAAAC,GACA5C,KAAAsE,cAAAhG,GAAA0B,KAAAsE,cAAAhG,KACAA,OACAsJ,YAEA5H,KAAAsE,cAAAhG,GAAAsJ,QAAAjG,MACAgB,UACAC,SACAiF,UAAA,IAAAC,QAGA1D,EAAAzE,UAAA8H,qBAAA,SAAAnJ,EAAAwH,EAAAiC,GACA,IAAAC,EAAAhI,KAAAsE,cAAAhG,GACA,GAAA0J,EAAA,CACA,QAAAhB,EAAA,EAAiCA,EAAAgB,EAAAJ,QAAAlG,OAA4BsF,IAAA,CAC7D,IAAAiB,EAAAD,EAAAJ,QAAAZ,GACAe,EACAE,EAAArF,QACAqF,EAAArF,SAIAqF,EAAAtF,QAAAmD,GAGAkC,EAAAJ,aAGAxD,EAAAzE,UAAA6H,SAAA,SAAAX,EAAAxC,GACA,WAAAJ,QAAA,SAAAtB,EAAAC,IAMA,SAAAiE,EAAAqB,EAAA7D,EAAA8D,QACA,IAAA9D,IAAiCA,MAEjC,IAAA+D,EADA/D,EAAA+C,OAAA/C,EAAA+C,QAAA,MAEA,SAAA/C,EAAAnF,KACAkJ,EAoEA,SAAAhB,EAAAP,GACA,IAAAuB,EAAA,IAAAC,eACA,uBAAAD,EACAA,EAAAE,KAAAlB,EAAAP,GAAA,OAEA,CACA,IAAA0B,EAAAC,oBACA,IAAAD,GACAH,EAAA,IAAAG,GACAD,KAAAlB,EAAAP,GAGAuB,EAAA,KAGA,OAAAA,EAnFAK,CAAApE,EAAA+C,OAAAP,IAGAuB,EAAA,IAAAC,gBACAC,KAAAjE,EAAA+C,QAAA,MAAAP,GAAA,GAEAuB,EAAAM,mBAAA,WACA,OAAAN,EAAAO,YAAA,MAAAP,EAAAQ,QAAA,IAAAR,EAAAO,YAAA,MAAAP,EAAAQ,QACA,GAAAR,EAAAS,aACA,IACAX,EAAA9B,KAAA0C,MAAAV,EAAAS,eAEA,MAAAlB,GACAQ,UAIA,OAAAC,EAAAO,YAAA,MAAAP,EAAAQ,OACA,GAAAR,EAAAS,aACA,IACAV,EAAA/B,KAAA0C,MAAAV,EAAAS,eAEA,MAAAlB,GACAQ,GAA+BY,QAAA,UAI/BZ,GAA2BY,QAAA,MAI3BX,EAAAY,QAAA,SAAArB,GACAQ,EAAAR,IAEAS,EAAAa,OAAAC,WAAA,SAAA/I,GACA,GAAAA,EAAAgJ,iBAAA,CACA,IAAAC,EAAAjJ,EAAAkJ,OAAAlJ,EAAAmJ,MAAA,IACAjF,EAAAkF,YACAlF,EAAAkF,WAAAH,KAIA,IASAtD,EATAJ,EAAArB,EAAAqB,QACA,GAAAA,EACA,QAAA8D,KAAA9D,EACAA,EAAA9F,eAAA4J,IACApB,EAAAqB,iBAAAD,EAAA9D,EAAA8D,IAMA,GAFApB,EAAAsB,gBAAArF,EAAAqF,gBAEArF,EAAAsF,MAGA,IAFA7D,EAAA,IAAA8D,UACAC,OAAA,OAAAxF,EAAAsF,MACAtF,EAAAyB,KACA,QAAAzH,KAAAyH,EACAA,EAAAlG,eAAAvB,IACAyH,EAAA+D,OAAAxL,EAAAyH,EAAAzH,SAMAyH,EAAAzB,EAAAyB,KAAAM,KAAAC,UAAAhC,EAAAyB,MAAA,KAEAsC,EAAA0B,KAAAhE,GA5EAiE,CAAAlD,EAAAlE,EAAA0B,EAAAzB,MAGAwB,EAzJA,GAqPA,IAAA4F,EAAA,qBACA,SAAA9C,EAAA+C,EAAAnE,GACA,OAAAmE,EAAA3C,QAAA0C,EAAA,SAAAlK,EAAAR,GACA,IAAAN,EAAA8G,EAAAxG,GACA,QAAA0D,IAAAhE,EACA,UAAAgF,MAAA,kCAAAlE,GAKA,MAHA,mBAAAd,IACAA,IAAA8G,IAEA9G,IAIAzB,EAAA6G,eAEA3F,OAAAC,eAAAnB,EAAA,cAAkDyB,OAAA,yDC9UlD,SAAAkL,IACAlK,KAAAmK,QAAAnK,KAAAmK,YACAnK,KAAAoK,cAAApK,KAAAoK,oBAAApH,EAwQA,SAAAqH,EAAApD,GACA,yBAAAA,EAOA,SAAAqD,EAAArD,GACA,uBAAAA,GAAA,OAAAA,EAGA,SAAAsD,EAAAtD,GACA,gBAAAA,EAnRAzJ,EAAAD,QAAA2M,EAGAA,iBAEAA,EAAAvK,UAAAwK,aAAAnH,EACAkH,EAAAvK,UAAAyK,mBAAApH,EAIAkH,EAAAM,oBAAA,GAIAN,EAAAvK,UAAA8K,gBAAA,SAAAjL,GACA,IA2PA,SAAAyH,GACA,uBAAAA,EA5PAyD,CAAAlL,MAAA,GAAAmL,MAAAnL,GACA,MAAA+B,UAAA,+BAEA,OADAvB,KAAAoK,cAAA5K,EACAQ,MAGAkK,EAAAvK,UAAAiL,KAAA,SAAAC,GACA,IAAAlD,EAAAmD,EAAAC,EAAAC,EAAAjN,EAAAkN,EAMA,GAJAjL,KAAAmK,UACAnK,KAAAmK,YAGA,UAAAU,KACA7K,KAAAmK,QAAAhC,OACAmC,EAAAtK,KAAAmK,QAAAhC,SAAAnI,KAAAmK,QAAAhC,MAAAzG,QAAA,CAEA,IADAiG,EAAAvF,UAAA,cACA4B,MACA,MAAA2D,EAGA,IAAAuD,EAAA,IAAAlH,MAAA,yCAAA2D,EAAA,KAEA,MADAuD,EAAAC,QAAAxD,EACAuD,EAOA,GAAAX,EAFAO,EAAA9K,KAAAmK,QAAAU,IAGA,SAEA,GAAAR,EAAAS,GACA,OAAA1I,UAAAV,QAEA,OACAoJ,EAAA5M,KAAA8B,MACA,MACA,OACA8K,EAAA5M,KAAA8B,KAAAoC,UAAA,IACA,MACA,OACA0I,EAAA5M,KAAA8B,KAAAoC,UAAA,GAAAA,UAAA,IACA,MAEA,QACA4I,EAAArH,MAAAhE,UAAAiE,MAAA1F,KAAAkE,UAAA,GACA0I,EAAAvH,MAAAvD,KAAAgL,QAEG,GAAAV,EAAAQ,GAIH,IAHAE,EAAArH,MAAAhE,UAAAiE,MAAA1F,KAAAkE,UAAA,GAEA2I,GADAE,EAAAH,EAAAlH,SACAlC,OACA3D,EAAA,EAAeA,EAAAgN,EAAShN,IACxBkN,EAAAlN,GAAAwF,MAAAvD,KAAAgL,GAGA,UAGAd,EAAAvK,UAAAyL,YAAA,SAAAP,EAAAQ,GACA,IAAAlN,EAEA,IAAAkM,EAAAgB,GACA,MAAA9J,UAAA,+BA2CA,OAzCAvB,KAAAmK,UACAnK,KAAAmK,YAIAnK,KAAAmK,QAAAmB,aACAtL,KAAA4K,KAAA,cAAAC,EACAR,EAAAgB,YACAA,cAEArL,KAAAmK,QAAAU,GAGAP,EAAAtK,KAAAmK,QAAAU,IAEA7K,KAAAmK,QAAAU,GAAAlJ,KAAA0J,GAGArL,KAAAmK,QAAAU,IAAA7K,KAAAmK,QAAAU,GAAAQ,GANArL,KAAAmK,QAAAU,GAAAQ,EASAf,EAAAtK,KAAAmK,QAAAU,MAAA7K,KAAAmK,QAAAU,GAAAU,SAIApN,EAHAoM,EAAAvK,KAAAoK,eAGAF,EAAAM,oBAFAxK,KAAAoK,gBAKAjM,EAAA,GAAA6B,KAAAmK,QAAAU,GAAAnJ,OAAAvD,IACA6B,KAAAmK,QAAAU,GAAAU,QAAA,EACAzH,QAAAqE,MAAA,mIAGAnI,KAAAmK,QAAAU,GAAAnJ,QACA,mBAAAoC,QAAA0H,OAEA1H,QAAA0H,SAKAxL,MAGAkK,EAAAvK,UAAA8L,GAAAvB,EAAAvK,UAAAyL,YAEAlB,EAAAvK,UAAA+L,KAAA,SAAAb,EAAAQ,GACA,IAAAhB,EAAAgB,GACA,MAAA9J,UAAA,+BAEA,IAAAoK,GAAA,EAEA,SAAA5L,IACAC,KAAA4L,eAAAf,EAAA9K,GAEA4L,IACAA,GAAA,EACAN,EAAA9H,MAAAvD,KAAAoC,YAOA,OAHArC,EAAAsL,WACArL,KAAAyL,GAAAZ,EAAA9K,GAEAC,MAIAkK,EAAAvK,UAAAiM,eAAA,SAAAf,EAAAQ,GACA,IAAAQ,EAAAC,EAAApK,EAAA3D,EAEA,IAAAsM,EAAAgB,GACA,MAAA9J,UAAA,+BAEA,IAAAvB,KAAAmK,UAAAnK,KAAAmK,QAAAU,GACA,OAAA7K,KAMA,GAHA0B,GADAmK,EAAA7L,KAAAmK,QAAAU,IACAnJ,OACAoK,GAAA,EAEAD,IAAAR,GACAhB,EAAAwB,EAAAR,WAAAQ,EAAAR,oBACArL,KAAAmK,QAAAU,GACA7K,KAAAmK,QAAAyB,gBACA5L,KAAA4K,KAAA,iBAAAC,EAAAQ,QAEG,GAAAf,EAAAuB,GAAA,CACH,IAAA9N,EAAA2D,EAAoB3D,KAAA,GACpB,GAAA8N,EAAA9N,KAAAsN,GACAQ,EAAA9N,GAAAsN,UAAAQ,EAAA9N,GAAAsN,aAAA,CACAS,EAAA/N,EACA,MAIA,GAAA+N,EAAA,EACA,OAAA9L,KAEA,IAAA6L,EAAAnK,QACAmK,EAAAnK,OAAA,SACA1B,KAAAmK,QAAAU,IAEAgB,EAAAE,OAAAD,EAAA,GAGA9L,KAAAmK,QAAAyB,gBACA5L,KAAA4K,KAAA,iBAAAC,EAAAQ,GAGA,OAAArL,MAGAkK,EAAAvK,UAAAqM,mBAAA,SAAAnB,GACA,IAAAvL,EAAA2L,EAEA,IAAAjL,KAAAmK,QACA,OAAAnK,KAGA,IAAAA,KAAAmK,QAAAyB,eAKA,OAJA,IAAAxJ,UAAAV,OACA1B,KAAAmK,WACAnK,KAAAmK,QAAAU,WACA7K,KAAAmK,QAAAU,GACA7K,KAIA,OAAAoC,UAAAV,OAAA,CACA,IAAApC,KAAAU,KAAAmK,QACA,mBAAA7K,GACAU,KAAAgM,mBAAA1M,GAIA,OAFAU,KAAAgM,mBAAA,kBACAhM,KAAAmK,WACAnK,KAKA,GAAAqK,EAFAY,EAAAjL,KAAAmK,QAAAU,IAGA7K,KAAA4L,eAAAf,EAAAI,QACG,GAAAA,EAEH,KAAAA,EAAAvJ,QACA1B,KAAA4L,eAAAf,EAAAI,IAAAvJ,OAAA,IAIA,cAFA1B,KAAAmK,QAAAU,GAEA7K,MAGAkK,EAAAvK,UAAAsL,UAAA,SAAAJ,GAQA,OANA7K,KAAAmK,SAAAnK,KAAAmK,QAAAU,GAEAR,EAAArK,KAAAmK,QAAAU,KACA7K,KAAAmK,QAAAU,IAEA7K,KAAAmK,QAAAU,GAAAjH,YAIAsG,EAAAvK,UAAAsM,cAAA,SAAApB,GACA,GAAA7K,KAAAmK,QAAA,CACA,IAAA+B,EAAAlM,KAAAmK,QAAAU,GAEA,GAAAR,EAAA6B,GACA,SACA,GAAAA,EACA,OAAAA,EAAAxK,OAEA,UAGAwI,EAAA+B,cAAA,SAAAE,EAAAtB,GACA,OAAAsB,EAAAF,cAAApB,sBC5RA,SAAAzK,GAAA,IAAAgM,OAAA,IAAAhM,MACA,oBAAA0B,YACAnE,OACA4F,EAAAtD,SAAAN,UAAA4D,MAiBA,SAAA8I,EAAAC,EAAAC,GACAvM,KAAAwM,IAAAF,EACAtM,KAAAyM,SAAAF,EAfAhP,EAAAkG,WAAA,WACA,WAAA4I,EAAA9I,EAAArF,KAAAuF,WAAA2I,EAAAhK,WAAAsK,eAEAnP,EAAAoP,YAAA,WACA,WAAAN,EAAA9I,EAAArF,KAAAyO,YAAAP,EAAAhK,WAAAwK,gBAEArP,EAAAmP,aACAnP,EAAAqP,cAAA,SAAAC,GACAA,GACAA,EAAAC,SAQAT,EAAA1M,UAAAoN,MAAAV,EAAA1M,UAAAqN,IAAA,aACAX,EAAA1M,UAAAmN,MAAA,WACA9M,KAAAyM,SAAAvO,KAAAkO,EAAApM,KAAAwM,MAIAjP,EAAA0P,OAAA,SAAAC,EAAAC,GACAT,aAAAQ,EAAAE,gBACAF,EAAAG,aAAAF,GAGA5P,EAAA+P,SAAA,SAAAJ,GACAR,aAAAQ,EAAAE,gBACAF,EAAAG,cAAA,GAGA9P,EAAAgQ,aAAAhQ,EAAAiQ,OAAA,SAAAN,GACAR,aAAAQ,EAAAE,gBAEA,IAAAD,EAAAD,EAAAG,aACAF,GAAA,IACAD,EAAAE,eAAA3J,WAAA,WACAyJ,EAAAO,YACAP,EAAAO,cACKN,KAKLtP,EAAQ,GAIRN,EAAA8C,aAAA,oBAAAyB,WAAAzB,mBACA,IAAAD,KAAAC,cACAL,WAAAK,aACA9C,EAAAmQ,eAAA,oBAAA5L,WAAA4L,qBACA,IAAAtN,KAAAsN,gBACA1N,WAAA0N,mDC9DA,SAAAtN,EAAAuN,IAAA,SAAAvN,EAAA4C,GACA,aAEA,IAAA5C,EAAAC,aAAA,CAIA,IAIAuN,EAJAC,EAAA,EACAC,KACAC,GAAA,EACAC,EAAA5N,EAAA6N,SAoJAC,EAAAzP,OAAA0P,gBAAA1P,OAAA0P,eAAA/N,GACA8N,OAAAzK,WAAAyK,EAAA9N,EAGU,wBAAAgO,SAAAlQ,KAAAkC,EAAAuN,SApFVC,EAAA,SAAAS,GACAV,EAAAW,SAAA,WAA0CC,EAAAF,MAI1C,WAGA,GAAAjO,EAAAoO,cAAApO,EAAAqO,cAAA,CACA,IAAAC,GAAA,EACAC,EAAAvO,EAAAwO,UAMA,OALAxO,EAAAwO,UAAA,WACAF,GAAA,GAEAtO,EAAAoO,YAAA,QACApO,EAAAwO,UAAAD,EACAD,GAwEKG,GApEL,WAKA,IAAAC,EAAA,gBAAAC,KAAAC,SAAA,IACAC,EAAA,SAAAC,GACAA,EAAAC,SAAA/O,GACA,iBAAA8O,EAAApJ,MACA,IAAAoJ,EAAApJ,KAAAsJ,QAAAN,IACAP,GAAAW,EAAApJ,KAAAlC,MAAAkL,EAAApN,UAIAtB,EAAAiP,iBACAjP,EAAAiP,iBAAA,UAAAJ,GAAA,GAEA7O,EAAAkP,YAAA,YAAAL,GAGArB,EAAA,SAAAS,GACAjO,EAAAoO,YAAAM,EAAAT,EAAA,MAiDAkB,GAEKnP,EAAAoP,eA/CL,WACA,IAAAC,EAAA,IAAAD,eACAC,EAAAC,MAAAd,UAAA,SAAAM,GAEAX,EADAW,EAAApJ,OAIA8H,EAAA,SAAAS,GACAoB,EAAAE,MAAAnB,YAAAH,IAyCAuB,GAEK5B,GAAA,uBAAAA,EAAA6B,cAAA,UAvCL,WACA,IAAAC,EAAA9B,EAAA+B,gBACAnC,EAAA,SAAAS,GAGA,IAAA2B,EAAAhC,EAAA6B,cAAA,UACAG,EAAAtH,mBAAA,WACA6F,EAAAF,GACA2B,EAAAtH,mBAAA,KACAoH,EAAAG,YAAAD,GACAA,EAAA,MAEAF,EAAAI,YAAAF,IA6BAG,GAxBAvC,EAAA,SAAAS,GACA5K,WAAA8K,EAAA,EAAAF,IA8BAH,EAAA7N,aA1KA,SAAA6H,GAEA,mBAAAA,IACAA,EAAA,IAAAjI,SAAA,GAAAiI,IAIA,IADA,IAAA8C,EAAA,IAAArH,MAAAvB,UAAAV,OAAA,GACA3D,EAAA,EAAqBA,EAAAiN,EAAAtJ,OAAiB3D,IACtCiN,EAAAjN,GAAAqE,UAAArE,EAAA,GAGA,IAAAqS,GAAkBlI,WAAA8C,QAGlB,OAFA8C,EAAAD,GAAAuC,EACAxC,EAAAC,GACAA,KA6JAK,EAAAR,iBA1JA,SAAAA,EAAAW,UACAP,EAAAO,GAyBA,SAAAE,EAAAF,GAGA,GAAAN,EAGAtK,WAAA8K,EAAA,EAAAF,OACS,CACT,IAAA+B,EAAAtC,EAAAO,GACA,GAAA+B,EAAA,CACArC,GAAA,EACA,KAjCA,SAAAqC,GACA,IAAAlI,EAAAkI,EAAAlI,SACA8C,EAAAoF,EAAApF,KACA,OAAAA,EAAAtJ,QACA,OACAwG,IACA,MACA,OACAA,EAAA8C,EAAA,IACA,MACA,OACA9C,EAAA8C,EAAA,GAAAA,EAAA,IACA,MACA,OACA9C,EAAA8C,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACA,MACA,QACA9C,EAAA3E,MAAAP,EAAAgI,IAiBAqF,CAAAD,GACiB,QACjB1C,EAAAW,GACAN,GAAA,MAvEA,CAyLC,oBAAAjM,UAAA,IAAA1B,EAAAJ,KAAAI,EAAA0B,4CCxLD,IAOAwO,EACAC,EARA5C,EAAAnQ,EAAAD,WAUA,SAAAiT,IACA,UAAAxM,MAAA,mCAEA,SAAAyM,IACA,UAAAzM,MAAA,qCAsBA,SAAA0M,EAAAC,GACA,GAAAL,IAAA7M,WAEA,OAAAA,WAAAkN,EAAA,GAGA,IAAAL,IAAAE,IAAAF,IAAA7M,WAEA,OADA6M,EAAA7M,WACAA,WAAAkN,EAAA,GAEA,IAEA,OAAAL,EAAAK,EAAA,GACK,MAAAxQ,GACL,IAEA,OAAAmQ,EAAApS,KAAA,KAAAyS,EAAA,GACS,MAAAxQ,GAET,OAAAmQ,EAAApS,KAAA8B,KAAA2Q,EAAA,MAvCA,WACA,IAEAL,EADA,mBAAA7M,WACAA,WAEA+M,EAEK,MAAArQ,GACLmQ,EAAAE,EAEA,IAEAD,EADA,mBAAA7D,aACAA,aAEA+D,EAEK,MAAAtQ,GACLoQ,EAAAE,GAjBA,GAwEA,IAEAG,EAFA5I,KACA6I,GAAA,EAEAC,GAAA,EAEA,SAAAC,IACAF,GAAAD,IAGAC,GAAA,EACAD,EAAAlP,OACAsG,EAAA4I,EAAAI,OAAAhJ,GAEA8I,GAAA,EAEA9I,EAAAtG,QACAuP,KAIA,SAAAA,IACA,IAAAJ,EAAA,CAGA,IAAAhE,EAAA6D,EAAAK,GACAF,GAAA,EAGA,IADA,IAAA9F,EAAA/C,EAAAtG,OACAqJ,GAAA,CAGA,IAFA6F,EAAA5I,EACAA,OACA8I,EAAA/F,GACA6F,GACAA,EAAAE,GAAAT,MAGAS,GAAA,EACA/F,EAAA/C,EAAAtG,OAEAkP,EAAA,KACAC,GAAA,EAnEA,SAAAK,GACA,GAAAX,IAAA7D,aAEA,OAAAA,aAAAwE,GAGA,IAAAX,IAAAE,IAAAF,IAAA7D,aAEA,OADA6D,EAAA7D,aACAA,aAAAwE,GAEA,IAEAX,EAAAW,GACK,MAAA/Q,GACL,IAEA,OAAAoQ,EAAArS,KAAA,KAAAgT,GACS,MAAA/Q,GAGT,OAAAoQ,EAAArS,KAAA8B,KAAAkR,KAgDAC,CAAAtE,IAiBA,SAAAuE,EAAAT,EAAAU,GACArR,KAAA2Q,MACA3Q,KAAAqR,QAYA,SAAAC,KA5BA3D,EAAAW,SAAA,SAAAqC,GACA,IAAA3F,EAAA,IAAArH,MAAAvB,UAAAV,OAAA,GACA,GAAAU,UAAAV,OAAA,EACA,QAAA3D,EAAA,EAAuBA,EAAAqE,UAAAV,OAAsB3D,IAC7CiN,EAAAjN,EAAA,GAAAqE,UAAArE,GAGAiK,EAAArG,KAAA,IAAAyP,EAAAT,EAAA3F,IACA,IAAAhD,EAAAtG,QAAAmP,GACAH,EAAAO,IASAG,EAAAzR,UAAA0Q,IAAA,WACArQ,KAAA2Q,IAAApN,MAAA,KAAAvD,KAAAqR,QAEA1D,EAAA4D,MAAA,UACA5D,EAAA6D,SAAA,EACA7D,EAAA8D,OACA9D,EAAA+D,QACA/D,EAAAgE,QAAA,GACAhE,EAAAiE,YAIAjE,EAAAlC,GAAA6F,EACA3D,EAAAvC,YAAAkG,EACA3D,EAAAjC,KAAA4F,EACA3D,EAAAkE,IAAAP,EACA3D,EAAA/B,eAAA0F,EACA3D,EAAA3B,mBAAAsF,EACA3D,EAAA/C,KAAA0G,EACA3D,EAAAmE,gBAAAR,EACA3D,EAAAoE,oBAAAT,EAEA3D,EAAA1C,UAAA,SAAA3M,GAAqC,UAErCqP,EAAAqE,QAAA,SAAA1T,GACA,UAAA0F,MAAA,qCAGA2J,EAAAsE,IAAA,WAA2B,WAC3BtE,EAAAuE,MAAA,SAAAC,GACA,UAAAnO,MAAA,mCAEA2J,EAAAyE,MAAA,WAA4B,iECtLtBpI,EAAa,qBCMZ,SAASqI,EAAQhO,GACtB,OAAO,SAAUiO,EAAqBC,EAAqBC,GACzD,IAAMC,EAAiBD,EAAWxT,MAoClC,OAlCAwT,EAAWxT,MAAQ,mBAAAmG,EAAAnF,KAAUgL,KAAA0H,EAAA,EAAAA,EAAAtQ,UAAAV,OAAAgR,IAAA1H,EAAA0H,GAAAtQ,UAAAsQ,GAC3B,IAAI3J,EAAUH,QAAU2J,EACpBlO,GAAWA,EAAQ6C,UAA+B,iBAAZ8D,EAAK,KAC7CjC,EDXD,SAAkBkB,EAAKnE,GAC5B,OAAOmE,EAAI3C,QAAQ0C,EAAY,SAAUlK,EAAGR,GAC1C,IAAIN,EAAQ8G,EAAKxG,GAQjB,YANc0D,IAAVhE,EACFA,EAAQ,GAEkB,mBAAVA,IAChBA,EAAQA,EAAM8G,IAET9G,ICCOkI,CAAS7C,EAAQ6C,SAAU8D,EAAK,KAG5C,IAAM2H,GACJ/J,OAAQvE,EAAQuE,OAChBgK,MAAO,QACP7J,QAASA,EAAU,SACnBjD,KAAMkF,EAAK,IAIb,OAFAhL,KAAKmM,QAAQvB,KAAK,gBAAiB+H,GAE5BF,EAAelP,MAAMvD,KAAMgL,GAAMtI,KAAK,SAACmQ,GAC5C,IAAMC,GACJlK,OAAQvE,EAAQuE,OAChBgK,MAAO,MACP7J,QAASA,EAAU,UACnBjD,KAAM+M,GAGR,OADA1N,EAAKgH,QAAQvB,KAAK,gBAAiBkI,GAC5BD,IACNnL,MAAM,SAACC,GACR,IAAMoL,GACJnK,OAAQvE,EAAQuE,OAChBgK,MAAO,QACP7J,QAASA,EAAU,SACnBjD,KAAM6B,GAGR,MADAxC,EAAKgH,QAAQvB,KAAK,gBAAiBmI,GAC7BpL,KAGH6K,2oBC8BXQ,EAAA,WAWE,SAAAC,EAAY5O,GATZrE,KAAAqE,SACE6O,cACEpD,KAAM,gBAIV9P,KAAAmM,QAAU,IAAIgH,EAAA,aAIZnT,KAAKqE,QAAO+O,KAAQpT,KAAKqE,QAAYA,GACrCrE,KAAKqT,UAAY,IAAIC,EAAA,aAAajP,GAgJtC,OA7IE4O,EAAAtT,UAAA4T,YAAA,SAAYlP,GAAZ,IAAAc,EAAAnF,UAAY,IAAAqE,UACVA,EAAO+O,KAAQpT,KAAKqE,QAAQ6O,aAAiB7O,GAC7C,IAAMmP,EAAQvF,SAAS4B,cAAc,SAiBrC,OAhBA2D,EAAMC,aAAa,OAAQ,QAC3BD,EAAME,UAAYrP,EAAQyL,KAE1B0D,EAAMnE,iBAAiB,SAAU,WAC/B,IAAMsE,EAAgBxO,EAAKyO,aAAaJ,EAAMK,MAAM,GAAIxP,GACpDA,EAAQyP,SACVH,EAAcjR,KAAK2B,EAAQyP,SAEzBzP,EAAQ8D,OACVwL,EAAcjR,KAAK2B,EAAQ8D,SAOxBqL,GAGTP,EAAAtT,UAAAiU,aAAA,SAAajK,EAAYtF,GAAzB,IAAAc,EAAAnF,KACE,OAAOA,KAAK+T,WAAWpK,EAAMtF,GAAS3B,KAAK,SAACsR,GAC1C,IAAI1V,EAAO+F,EAAQ/F,MAAQ0V,EAAK1V,KAOhC,OANI+F,EAAQ4P,WACV3V,EAAO+F,EAAQ4P,WAAW3V,GACjB+F,EAAQ6P,qBACjB5V,GAAQ,KAAM,IAAIwJ,MAAOqM,eAE3B9P,EAAQ/F,KAAOA,EACR6G,EAAKiP,eAAeJ,EAAM1V,EAAM+F,GAAS3B,KAAK,SAAC2R,GACpD,OAAIA,GACFA,EAAO/V,KAAO+V,EAAO/V,MAAQ+F,EAAQ/F,KAC9B6G,EAAKmP,YAAYD,IAEnBpQ,QAAQrB,OAAO,oBAM5BqQ,EAAAtT,UAAAyU,eAAA,SAAeJ,EAAM1V,EAAc+F,GAEjC,IAAMyB,GACJyO,UACEC,IAAK,eACLC,aAAcnW,EACdoW,QAAUpI,QAAyBtJ,IAArBqB,EAAQsQ,SAAyBtQ,EAAQsQ,SAAW,IAEpEC,cACEzF,QACE7C,GAAI0H,EAAK1H,GACTuI,UAAWb,EAAKa,UAChBC,KAAMd,EAAKc,MAEbC,KAAOzI,GAAI,QAIf,OAAOtM,KAAKqT,UAAUlM,KAAK,uBAAyBrB,KAAIA,EAAEJ,SAAWsP,OAAQ,UAI/E/B,EAAAtT,UAAA2U,YAAA,SAAYD,EAAQ/V,GAElB,IAAM2W,GACJV,UACEC,IAAK,eACLU,YAAa,KACbT,cALJnW,EAAOA,GAAQ+V,EAAO/V,MAAQ+V,EAAO/H,IAKZ,SACrBtG,QAAS,KACT0O,QACEpI,GAAI+H,EAAO/H,MAIjB,OAAOtM,KAAKqT,UAAUlM,KAAK,uBAAyBrB,KAAMmP,IAAavS,KAAK,SAACyS,GAE3E,OADAA,EAAS7W,KAAO6W,EAAS7W,MAAQA,EAC1B6W,KAKXlC,EAAAtT,UAAAyV,UAAA,SAAUD,EAAU7W,GAElB,IAAM+W,GACJd,UACEC,IAAK,oBACLE,QACEpI,GAAI,GAENmI,aAAc,QAPlBnW,EAAOA,GAAQ6W,EAAS7W,MAAQ6W,EAAS7I,IAQrCtG,QAAS,KACTkP,YAAa,MAEfI,SACEC,UAEFC,mBACEC,SAEIzP,QAAS,SACTyO,aAAcnW,EACdoX,YAAaP,EAAS7I,GACtBqJ,gBAAiB,KACjBC,gBAAiB,SAKzB,OAAO5V,KAAKqT,UAAUlM,KAAK,uBAAyBrB,KAAMuP,KAI5DpC,EAAAtT,UAAAoU,WAAA,SAAWpK,EAAYtF,GADvB,IAAAc,EAAAnF,KAEE,YADqB,IAAAqE,UACdrE,KAAKqT,UAAUlM,KAAK,sBACzBwC,KAAIA,EACJJ,WAAY,SAACH,GACX,IAAML,EAAUK,EAAgByM,QAAQ,GAAK,aACzCxR,EAAQkF,YACVlF,EAAQkF,WAAWH,GAErB,IAAM0M,GACJlN,OAAQ,SACRgK,MAAO,WACP7J,QAAOA,EACPjD,MACEsD,gBAAeA,IAGnBjE,EAAKgH,QAAQvB,KAAK,gBAAiBkL,MAEpCpT,KAAK,SAACmQ,GACP,IAAImB,EAIJ,OAHInB,GAAQA,EAAKkD,cACf/B,EAAOnB,EAAKkD,YAAY,IAEnB/B,KAhGXgC,GADC3D,GAAUzJ,OAAQ,kBAAmB1B,SAAU,gKAuBhD8O,GADC3D,GAAUzJ,OAAQ,eAAgB1B,SAAU,wKAqB7C8O,GADC3D,GAAUzJ,OAAQ,aAAc1B,SAAU,oKAgC3C8O,GADC3D,GAAUzJ,OAAQ,SAAU1B,SAAU,iEACtB+O,KAAIxX,uEA0BvBwU,EA7JA,GAAqBiD,EAAA","file":"ngw-uploader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NgwUploader\"] = factory();\n\telse\n\t\troot[\"NgwUploader\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.NgwConnector = {})));\n}(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\n\n    var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n    function createCommonjsModule(fn, module) {\n    \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n    }\n\n    var polyfills = createCommonjsModule(function (module, exports) {\n    Object.assign || Object.defineProperty(Object, 'assign', { enumerable: !1, configurable: !0, writable: !0, value: function (e, r) { if (null == e) throw new TypeError('Cannot convert first argument to object'); for (let t = Object(e), n = 1; n < arguments.length; n++) { let o = arguments[n]; if (null != o) for (let a = Object.keys(Object(o)), c = 0, b = a.length; c < b; c++) { let i = a[c], l = Object.getOwnPropertyDescriptor(o, i); void 0 !== l && l.enumerable && (t[i] = o[i]); } } return t } });\n\n    // https://github.com/taylorhakes/promise-polyfill\n    // Copyright (c) 2014 Taylor Hakes\n    // Copyright (c) 2014 Forbes Lindesay\n\n    // Permission is hereby granted, free of charge, to any person obtaining a copy\n    // of this software and associated documentation files (the \"Software\"), to deal\n    // in the Software without restriction, including without limitation the rights\n    // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    // copies of the Software, and to permit persons to whom the Software is\n    // furnished to do so, subject to the following conditions:\n\n    // The above copyright notice and this permission notice shall be included in\n    // all copies or substantial portions of the Software.\n\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    // THE SOFTWARE.\n    !function(e,n){n();}(0,function(){function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this);}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value);}catch(f){return void i(n.promise,f)}r(n.promise,o);}else(1===e._state?r:i)(n.promise,e._value);})):e._deferreds.push(n);}function r(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if(\"function\"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments);}}(o,n),e)}e._state=1,e._value=n,f(e);}catch(r){i(e,r);}}function i(e,n){e._state=2,e._value=n,f(e);}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value);});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null;}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e));},function(e){t||(t=!0,i(n,e));});}catch(o){if(t)return;t=!0,i(n,o);}}var c=setTimeout;t.prototype[\"catch\"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t;}(e,t,r)),r},t.prototype[\"finally\"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&(\"object\"==typeof f||\"function\"==typeof f)){var u=f.then;if(\"function\"==typeof u)return void u.call(f,function(n){o(e,n);},t)}r[e]=f,0==--i&&n(r);}catch(c){t(c);}}if(!e||\"undefined\"==typeof e.length)throw new TypeError(\"Promise.all accepts an array\");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f]);})},t.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===t?e:new t(function(n){n(e);})},t.reject=function(e){return new t(function(n,t){t(e);})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t);})},t._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e);}||function(e){c(e,0);},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e);};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof commonjsGlobal)return commonjsGlobal;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=t;});\n    });\n\n    var OPTIONS = {\r\n        route: '/api/component/pyramid/route',\r\n    };\r\n    var NgwConnector = (function () {\r\n        function NgwConnector(options) {\r\n            this.options = {};\r\n            this._loadingQueue = {};\r\n            this._loadingStatus = {};\r\n            this.options = Object.assign({}, OPTIONS, options || {});\r\n        }\r\n        NgwConnector.prototype.connect = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var _a, login, password;\r\n                var _this = this;\r\n                return __generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            if (!this.route) return [3, 1];\r\n                            return [2, Promise.resolve(this.route)];\r\n                        case 1:\r\n                            if (!this.options.auth) return [3, 3];\r\n                            _a = this.options.auth, login = _a.login, password = _a.password;\r\n                            if (!(login && password)) return [3, 3];\r\n                            return [4, this.getUserInfo()];\r\n                        case 2:\r\n                            _b.sent();\r\n                            _b.label = 3;\r\n                        case 3: return [4, this.makeQuery(this.options.route, {}, {}).then(function (route) {\r\n                                _this.route = route;\r\n                                return route;\r\n                            })];\r\n                        case 4: return [2, _b.sent()];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        NgwConnector.prototype.getUserInfo = function () {\r\n            var _this = this;\r\n            var client = this.makeClientId();\r\n            return this.makeQuery('/api/component/auth/current_user', {}, {\r\n                headers: {\r\n                    'Authorization': 'Basic ' + client,\r\n                    'Access-Control-Allow-Origin': '*',\r\n                    'Access-Control-Allow-Headers': '*',\r\n                },\r\n                mode: 'cors',\r\n            }).then(function (data) {\r\n                console.log(data);\r\n                if (data.keyname !== 'guest') {\r\n                    data.clientId = _this.makeClientId();\r\n                    if (localStorage) {\r\n                        localStorage.setItem('nguser', JSON.stringify(data));\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        NgwConnector.prototype.makeClientId = function () {\r\n            var _a = this.options.auth, login = _a.login, password = _a.password;\r\n            return window.btoa(unescape(encodeURIComponent(login + \":\" + password)));\r\n        };\r\n        NgwConnector.prototype.request = function (name, params, options) {\r\n            var _this = this;\r\n            return this.connect().then(function (apiItems) {\r\n                for (var a in apiItems) {\r\n                    if (apiItems.hasOwnProperty(a)) {\r\n                        if (a === name) {\r\n                            var apiItem = apiItems[a].slice();\r\n                            var url = apiItem.shift();\r\n                            if (apiItem.length) {\r\n                                params = params || {};\r\n                                var replaceParams = {};\r\n                                for (var fry = 0; fry < apiItem.length; fry++) {\r\n                                    var arg = apiItem[fry];\r\n                                    replaceParams[fry] = '{' + arg + '}';\r\n                                    if (params[arg] === undefined) {\r\n                                        throw new Error('`' + arg + '`' + ' url api argument is not specified');\r\n                                    }\r\n                                }\r\n                                url = template(url, replaceParams);\r\n                            }\r\n                            return _this.makeQuery(url, params, options);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        NgwConnector.prototype.post = function (name, options, params) {\r\n            options = options || {};\r\n            options.method = 'POST';\r\n            return this.request(name, params, options);\r\n        };\r\n        NgwConnector.prototype.makeQuery = function (url, params, options) {\r\n            var _this = this;\r\n            url = (this.options.baseUrl ? this.options.baseUrl : '') + url;\r\n            if (url) {\r\n                if (params) {\r\n                    url = template(url, params);\r\n                }\r\n                url = url.replace(/([^:]\\/)\\/+/g, '$1');\r\n                if (!this._loadingStatus[url]) {\r\n                    this._loadingStatus[url] = true;\r\n                    return this._getJson(url, options).then(function (data) {\r\n                        _this._loadingStatus[url] = false;\r\n                        _this._executeLoadingQueue(url, data);\r\n                        return data;\r\n                    }).catch(function (er) {\r\n                        _this._loadingStatus[url] = false;\r\n                        _this._executeLoadingQueue(url, er, true);\r\n                        throw er;\r\n                    });\r\n                }\r\n                else {\r\n                    this._loadingStatus[url] = false;\r\n                    var promise = new Promise(function (resolve, reject) {\r\n                        _this._setLoadingQueue(url, resolve, reject);\r\n                    });\r\n                    return promise;\r\n                }\r\n            }\r\n            else {\r\n                throw new Error('No `url` parameter set for option ' + name);\r\n            }\r\n        };\r\n        NgwConnector.prototype._setLoadingQueue = function (name, resolve, reject) {\r\n            this._loadingQueue[name] = this._loadingQueue[name] || {\r\n                name: name,\r\n                waiting: [],\r\n            };\r\n            this._loadingQueue[name].waiting.push({\r\n                resolve: resolve,\r\n                reject: reject,\r\n                timestamp: new Date(),\r\n            });\r\n        };\r\n        NgwConnector.prototype._executeLoadingQueue = function (name, data, isError) {\r\n            var queue = this._loadingQueue[name];\r\n            if (queue) {\r\n                for (var fry = 0; fry < queue.waiting.length; fry++) {\r\n                    var wait = queue.waiting[fry];\r\n                    if (isError) {\r\n                        if (wait.reject) {\r\n                            wait.reject();\r\n                        }\r\n                    }\r\n                    else {\r\n                        wait.resolve(data);\r\n                    }\r\n                }\r\n                queue.waiting = [];\r\n            }\r\n        };\r\n        NgwConnector.prototype._getJson = function (url, options) {\r\n            return new Promise(function (resolve, reject) {\r\n                loadJSON(url, resolve, options, reject);\r\n            });\r\n        };\r\n        return NgwConnector;\r\n    }());\r\n    function loadJSON(url, callback, options, error) {\r\n        if (options === void 0) { options = {}; }\r\n        options.method = options.method || 'GET';\r\n        var xhr;\r\n        if (options.mode === 'cors') {\r\n            xhr = createCORSRequest(options.method, url);\r\n        }\r\n        else {\r\n            xhr = new XMLHttpRequest();\r\n            xhr.open(options.method || 'GET', url, true);\r\n        }\r\n        xhr.onreadystatechange = function () {\r\n            if ((xhr.readyState === 4 && xhr.status === 200) || (xhr.readyState === 3 && xhr.status === 201)) {\r\n                if (xhr.responseText) {\r\n                    try {\r\n                        callback(JSON.parse(xhr.responseText));\r\n                    }\r\n                    catch (er) {\r\n                        error();\r\n                    }\r\n                }\r\n            }\r\n            else if (xhr.readyState === 3 && xhr.status === 400) {\r\n                if (xhr.responseText) {\r\n                    try {\r\n                        error(JSON.parse(xhr.responseText));\r\n                    }\r\n                    catch (er) {\r\n                        error({ message: '' });\r\n                    }\r\n                }\r\n                else {\r\n                    error({ message: '' });\r\n                }\r\n            }\r\n        };\r\n        xhr.onerror = function (er) {\r\n            error(er);\r\n        };\r\n        xhr.upload.onprogress = function (e) {\r\n            if (e.lengthComputable) {\r\n                var percentComplete = (e.loaded / e.total) * 100;\r\n                if (options.onProgress) {\r\n                    options.onProgress(percentComplete);\r\n                }\r\n            }\r\n        };\r\n        var headers = options.headers;\r\n        if (headers) {\r\n            for (var h in headers) {\r\n                if (headers.hasOwnProperty(h)) {\r\n                    xhr.setRequestHeader(h, headers[h]);\r\n                }\r\n            }\r\n        }\r\n        xhr.withCredentials = options.withCredentials;\r\n        var data;\r\n        if (options.file) {\r\n            data = new FormData();\r\n            data.append('file', options.file);\r\n            if (options.data) {\r\n                for (var d in data) {\r\n                    if (data.hasOwnProperty(d)) {\r\n                        data.append(d, data[d]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            data = options.data ? JSON.stringify(options.data) : null;\r\n        }\r\n        xhr.send(data);\r\n    }\r\n    function createCORSRequest(method, url) {\r\n        var xhr = new XMLHttpRequest();\r\n        if ('withCredentials' in xhr) {\r\n            xhr.open(method, url, true);\r\n        }\r\n        else {\r\n            var X = XDomainRequest;\r\n            if (typeof X !== 'undefined') {\r\n                xhr = new X();\r\n                xhr.open(method, url);\r\n            }\r\n            else {\r\n                xhr = null;\r\n            }\r\n        }\r\n        return xhr;\r\n    }\r\n    var templateRe = /\\{ *([\\w_-]+) *\\}/g;\r\n    function template(str, data) {\r\n        return str.replace(templateRe, function (s, key) {\r\n            var value = data[key];\r\n            if (value === undefined) {\r\n                throw new Error('No value provided for letiable ' + s);\r\n            }\r\n            else if (typeof value === 'function') {\r\n                value = value(data);\r\n            }\r\n            return value;\r\n        });\r\n    }\n\n    exports.NgwConnector = NgwConnector;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ngw-connector.js.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// from leaflet Util.js\r\nconst templateRe = /\\{ *([\\w_-]+) *\\}/g;\r\n\r\nexport function template(str, data) {\r\n  return str.replace(templateRe, function (s, key) {\r\n    let value = data[key];\r\n\r\n    if (value === undefined) {\r\n      value = '';\r\n\r\n    } else if (typeof value === 'function') {\r\n      value = value(data);\r\n    }\r\n    return value;\r\n  });\r\n}\r\n","import NgwUploader, { EmitterStatus, AvailableStatus } from './ngw-uploader';\r\nimport { template } from './utils';\r\n\r\n/**\r\n * decorator to emit events on start end and error for async methods\r\n * @param options\r\n */\r\nexport function evented(options?: { status: AvailableStatus; template?: string }) {\r\n  return function (target: NgwUploader, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const originalMethod = descriptor.value;\r\n\r\n    descriptor.value = function (...args) {\r\n      let message = status || propertyKey;\r\n      if (options && options.template && typeof args[0] === 'object') {\r\n        message = template(options.template, args[0]);\r\n      }\r\n\r\n      const eventBegin: EmitterStatus = {\r\n        status: options.status,\r\n        state: 'begin',\r\n        message: message + ' start',\r\n        data: args[0]\r\n      };\r\n      this.emitter.emit('status:change', eventBegin);\r\n\r\n      return originalMethod.apply(this, args).then((resp) => {\r\n        const eventEnd: EmitterStatus = {\r\n          status: options.status,\r\n          state: 'end',\r\n          message: message + ' finish',\r\n          data: resp\r\n        };\r\n        this.emitter.emit('status:change', eventEnd);\r\n        return resp;\r\n      }).catch((er) => {\r\n        const eventError: EmitterStatus = {\r\n          status: options.status,\r\n          state: 'error',\r\n          message: message + ' error',\r\n          data: er\r\n        };\r\n        this.emitter.emit('status:change', eventError);\r\n        throw er;\r\n      });\r\n    };\r\n    return descriptor;\r\n  };\r\n}\r\n","// import { NgwConnector } from '../ngw-connector/src/ngw-connector';\nimport { NgwConnector, NgwConnectorOptions } from '@nextgis/ngw-connector';\nimport { EventEmitter } from 'events';\nimport { evented } from './decorators';\n\nexport interface UploadInputOptions {\n  html?: string;\n  name?: string;\n  parentId?: number;\n  addTimestampToName?: boolean;\n  success?: (newRes: ResourceCreateResp) => void;\n  error?: (er: Error) => void;\n  createName?: (name: string) => string;\n}\n\ninterface ResourceCreateResp {\n  id: number;\n  name?: string;\n  parent?: { id: number };\n}\n\nexport interface NgwUploadOptions extends NgwConnectorOptions {\n  baseUrl?: string;\n  inputOptions?: UploadInputOptions;\n}\n\nexport interface RasterUploadResp {\n  status?: number;\n}\n\nexport interface RasterRequestResourceOptions {\n  cls: 'raster_layer';\n  display_name: string;\n  parent: { id: number };\n}\n\nexport interface RasterLayerSourceOptions {\n  id: string;\n  mime_type: string;\n  size: number;\n}\n\nexport interface RasterRequestLayerOptions {\n  source: RasterLayerSourceOptions;\n  srs: { id: 3857 };\n}\n\nexport interface RasterRequestOptions {\n  resource: RasterRequestResourceOptions;\n  raster_layer: RasterRequestLayerOptions;\n}\n\nexport interface RasterUploadOptions {\n  name?: string;\n  parentId?: number;\n  onProgress?: (percentComplete: number) => void;\n  addTimestampToName?: boolean;\n  createName?: (name: string) => string;\n}\n\nexport interface RespError {\n  exception: 'ValidationError';\n  message: string;\n  serializer: string;\n}\n\nexport type AvailableStatus = 'upload' | 'create-resource' | 'create-style' | 'create-wms';\n\nexport interface EmitterStatus {\n  status: AvailableStatus;\n  state: 'begin' | 'end' | 'progress' | 'error';\n  message?: string;\n  data?: any;\n}\n\nexport default class NgwUploader {\n\n  options: NgwUploadOptions = {\n    inputOptions: {\n      html: 'Upload file',\n    },\n  };\n\n  emitter = new EventEmitter();\n  connector: NgwConnector;\n\n  constructor(options: NgwUploadOptions) {\n    this.options = { ...this.options, ...options };\n    this.connector = new NgwConnector(options);\n  }\n\n  createInput(options: UploadInputOptions = {}): HTMLElement {\n    options = { ...this.options.inputOptions, ...options };\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.innerHTML = options.html;\n\n    input.addEventListener('change', () => {\n      const uploadPromise = this.uploadRaster(input.files[0], options);\n      if (options.success) {\n        uploadPromise.then(options.success);\n      }\n      if (options.error) {\n        uploadPromise.then(options.error);\n      }\n      // .then((newStyle) => {\n      //   this.createWms(newStyle, options.name);\n      // });\n    });\n\n    return input;\n  }\n\n  uploadRaster(file: File, options: RasterUploadOptions): Promise<any> {\n    return this.fileUpload(file, options).then((meta) => {\n      let name = options.name || meta.name;\n      if (options.createName) {\n        name = options.createName(name);\n      } else if (options.addTimestampToName) {\n        name += '_' + new Date().toISOString();\n      }\n      options.name = name;\n      return this.createResource(meta, name, options).then((newRes) => {\n        if (newRes) {\n          newRes.name = newRes.name || options.name;\n          return this.createStyle(newRes);\n        }\n        return Promise.reject('No resource');\n      });\n    });\n  }\n\n  @evented({ status: 'create-resource', template: 'resource creation' })\n  createResource(meta, name: string, options: RasterUploadOptions) {\n\n    const data = {\n      resource: {\n        cls: 'raster_layer',\n        display_name: name,\n        parent: { id: options.parentId !== undefined ? options.parentId : 0 },\n      },\n      raster_layer: {\n        source: {\n          id: meta.id,\n          mime_type: meta.mime_type,\n          size: meta.size,\n        },\n        srs: { id: 3857 },\n      },\n    };\n\n    return this.connector.post('resource.collection', { data, headers: { Accept: '*/*' } });\n  }\n\n  @evented({ status: 'create-style', template: 'style creation for resource ID {id}' })\n  createStyle(newRes, name?: string) {\n    name = name || newRes.name || newRes.id;\n    const styleData = {\n      resource: {\n        cls: 'raster_style',\n        description: null,\n        display_name: name + '_style',\n        keyname: null,\n        parent: {\n          id: newRes.id,\n        },\n      },\n    };\n    return this.connector.post('resource.collection', { data: styleData }).then((newStyle) => {\n      newStyle.name = newStyle.name || name;\n      return newStyle;\n    });\n  }\n\n  @evented({ status: 'create-wms', template: 'wms creation for resource ID {id}' })\n  createWms(newStyle, name?: string) {\n    name = name || newStyle.name || newStyle.id;\n    const wmsData = {\n      resource: {\n        cls: 'wmsserver_service',\n        parent: {\n          id: 0\n        },\n        display_name: 'WMS_' + name,\n        keyname: null,\n        description: null\n      },\n      resmeta: {\n        items: {}\n      },\n      wmsserver_service: {\n        layers: [\n          {\n            keyname: 'image1',\n            display_name: name,\n            resource_id: newStyle.id,\n            min_scale_denom: null,\n            max_scale_denom: null\n          }\n        ]\n      }\n    };\n    return this.connector.post('resource.collection', { data: wmsData });\n  }\n\n  @evented({ status: 'upload', template: 'file upload' })\n  fileUpload(file: File, options: RasterUploadOptions = {}) {\n    return this.connector.post('file_upload.upload', {\n      file,\n      onProgress: (percentComplete) => {\n        const message = percentComplete.toFixed(2) + '% uploaded';\n        if (options.onProgress) {\n          options.onProgress(percentComplete);\n        }\n        const eventProgress: EmitterStatus = {\n          status: 'upload',\n          state: 'progress',\n          message,\n          data: {\n            percentComplete\n          }\n        };\n        this.emitter.emit('status:change', eventProgress);\n      },\n    }).then((resp) => {\n      let meta;\n      if (resp && resp.upload_meta) {\n        meta = resp.upload_meta[0];\n      }\n      return meta;\n    });\n  }\n}\n"],"sourceRoot":""}