!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet"),require("events"),require("leaflet.wms/src/leaflet.wms.js")):"function"==typeof define&&define.amd?define(["leaflet","events","leaflet.wms/src/leaflet.wms.js"],e):"object"==typeof exports?exports.LeafletMapAdapter=e(require("leaflet"),require("events"),require("leaflet.wms/src/leaflet.wms.js")):t.LeafletMapAdapter=e(t.leaflet,t.events,t["leaflet.wms/src/leaflet.wms.js"])}(window,function(t,e,r){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r(1),i=1,a=function(){function t(t,e){this.map=t,this.name=e.id||String(i++),this.options=Object.assign({},this.options,e)}return t.prototype.addLayer=function(t){return null},t}(),s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r},u=1,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.addLayer=function(t){this.name=t.id||"tile-"+u++;var e=t.url,r=p(t,["url"]);return new n.TileLayer(e,r)},e}(a),f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=1,y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.addLayer=function(t){return this.name=t.id||"geojson-"+l++,new n.GeoJSON(t.data,t)},e}(a),d=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(t){function e(e){var r=t.call(this,e)||this;e.customAttribution&&[].concat(e.customAttribution).forEach(function(t){return r.addAttribution(t)});return r}return d(e,t),e}(n.Control.Attribution),m=r(2),v=r.n(m),_=function(){return(_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},b=1,O=function(){function t(){}return t.prototype.addLayer=function(t){var e=(t=_({transparent:!0},t)).updateWmsParams;if(this.name=t.id||"image-"+b++,this.layer=v.a.overlay(t.url,t),e){var r=this.layer.updateWmsParams;this.layer.updateWmsParams=function(t){r.call(this,t),this.wmsParams=e(this.wmsParams)}}return this.layer},t}(),g=function(){function t(){this.options={target:"map"},this.layerAdapters=t.layerAdapters,this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new o.EventEmitter,this._layers={},this.DPI=1e3/39.37/.28,this.IPM=39.37,this._order=0,this._length=9999,this._baseLayers=[]}return t.prototype.create=function(t){void 0===t&&(t={target:"map"}),this.options=Object.assign({},t),this.map=new n.Map(this.options.target,{zoomControl:!1,attributionControl:!1}),this.emitter.emit("create",{map:this.map}),this._addMapListeners()},t.prototype.getContainer=function(){return this.map.getContainer()},t.prototype.onMapLoad=function(t){return new Promise(function(e){e(t&&t())})},t.prototype.setCenter=function(t){this.map.setView(t,this.map.getZoom())},t.prototype.setZoom=function(t){this.map.setZoom(t)},t.prototype.fit=function(t){this.map.fitBounds([[t[3],t[0]],[t[1],t[2]]])},t.prototype.getLayerAdapter=function(e){return t.layerAdapters[e]},t.prototype.getLayer=function(t){return void 0!==this._layers[t]},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.isLayerOnTheMap=function(t){return this._layers[t].onMap},t.prototype.addControl=function(e,r,n){var o;if("string"==typeof e){var i=t.controlAdapters[e];i&&(o=new i(n))}else o=e;if(o)return o.options.position=r.replace("-",""),this.map.addControl(o),o},t.prototype.addLayer=function(t,e,r){var n,o=this;if(n="string"==typeof t?this.getLayerAdapter(t):t){var i=new n(this.map,e),a=i.addLayer(e),s=i.addLayer(e),p=function(t){var n=i.name,a={layer:t,onMap:!1};return r?(a.baseLayer=!0,o._baseLayers.push(n)):a.order=e.order||o._order++,o._layers[n]=a,i};return s.then?s.then(function(t){return p(t)}):Promise.resolve(p(a))}return Promise.reject("No adapter")},t.prototype.removeLayer=function(t){},t.prototype.showLayer=function(t){this.toggleLayer(t,!0)},t.prototype.hideLayer=function(t){this.toggleLayer(t,!1)},t.prototype.setLayerOpacity=function(t,e){},t.prototype.getScaleForResolution=function(t,e){return parseFloat(t)*(e*this.IPM*this.DPI)},t.prototype.getResolutionForScale=function(t,e){return parseFloat(t)/(e*this.IPM*this.DPI)},t.prototype.toggleLayer=function(t,e){var r=this,o=function(t,o){if(e){if(t instanceof n.Map&&(o.layer.addTo(t),o.layer.setZIndex)){var i=o.baseLayer?0:r._length-o.order;o.layer.setZIndex(i)}}else t.removeLayer(o.layer);o.onMap=e},i=this._layers[t];i&&i.onMap!==e&&(this.map?o(this.map,i):this.emitter.once("create",function(t){o(t.map,i)}))},t.prototype.onMapClick=function(t){var e=t.containerPoint,r=t.latlng;this.emitter.emit("click",{latLng:r,pixel:{left:e.x,top:e.y},source:t})},t.prototype._addMapListeners=function(){var t=this;this.map.on("click",function(e){t.onMapClick(e)})},t.layerAdapters={IMAGE:O,TILE:c,GEOJSON:y},t.controlAdapters={ZOOM:n.Control.Zoom,ATTRIBUTION:h},t}();e.default=g}]).default});
//# sourceMappingURL=leaflet-map-adapter.js.map