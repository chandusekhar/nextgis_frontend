{"version":3,"file":"index.js","sources":["src/layer-adapters/ImageAdapter.ts","src/layer-adapters/OsmAdapter.ts","src/layer-adapters/markerAdapter.ts","src/OlMapAdapter.ts"],"sourcesContent":["import ImageWMS from 'ol/source/ImageWMS';\nimport ImageLayer from 'ol/layer/Image';\n\nlet ID = 1;\n\nexport class ImageAdapter {\n\n  name: string;\n\n  addLayer(options?) {\n\n    this.name = options.id || 'image-' + ID++;\n        // const options = {\n    //   maxResolution: item.maxResolution ? item.maxResolution : undefined,\n    //   minResolution: item.minResolution ? item.minResolution : undefined,\n    //   visible: item.visibility,\n    //   opacity: item.transparency ? (1 - item.transparency / 100) : 1.0,\n    // };\n\n    const source = new ImageWMS({\n      url: options.url,\n      params: {\n        resource: options.layer_style_id,\n      },\n      ratio: 1,\n      imageLoadFunction: (image, src) => {\n        const url = src.split('?')[0];\n        const query = src.split('?')[1];\n        const queryObject = queryToObject(query);\n\n        image.getImage().src = url\n          + '?resource=' + queryObject.resource\n          + '&extent=' + queryObject.BBOX\n          + '&size=' + queryObject.WIDTH + ',' + queryObject.HEIGHT\n          + '#' + Date.now(); // in-memory cache busting\n      },\n    });\n\n    const layer = new ImageLayer({source});\n\n    return layer;\n  }\n}\n\n\n// TODO: move to utils or rewrite with native js methods\nexport function queryToObject(str: string) {\n\n  const dec = decodeURIComponent;\n  const qp = str.split('&');\n  const ret: {[name: string]: any} = {};\n  let name;\n  let val;\n  for (let i = 0, l = qp.length, item; i < l; ++i) {\n    item = qp[i];\n    if (item.length) {\n      const s = item.indexOf('=');\n      if (s < 0) {\n        name = dec(item);\n        val = '';\n      } else {\n        name = dec(item.slice(0, s));\n        val = dec(item.slice(s + 1));\n      }\n      if (typeof ret[name] === 'string') { // inline'd type check\n        ret[name] = [ret[name]];\n      }\n\n      if (Array.isArray(ret[name])) {\n        ret[name].push(val);\n      } else {\n        ret[name] = val;\n      }\n    }\n  }\n  return ret; // Object\n}\n","import OSM from 'ol/source/OSM';\r\nimport TileLayer from 'ol/layer/Tile';\r\n\r\nexport class OsmAdapter {\r\n\r\n  name = 'osm';\r\n\r\n  addLayer(options?) {\r\n    const layer = new TileLayer({\r\n      source: new OSM(),\r\n    });\r\n    return layer;\r\n  }\r\n\r\n}\r\n","import Point from 'ol/geom/Point';\r\nimport Feature from 'ol/Feature';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport {Vector as VectorLayer} from 'ol/layer';\r\nimport {Icon, Style} from 'ol/style.js';\r\nimport VectorSource from 'ol/source/Vector';\r\n\r\nlet ID = 1;\r\n\r\nexport class MarkerAdapter {\r\n\r\n  name: string;\r\n\r\n  addLayer(options?) {\r\n\r\n    this.name = options.id || 'marker-' + ID++;\r\n\r\n    const {lat, lng} = options.latLng;\r\n\r\n    const point = new Feature({\r\n      geometry: new Point(fromLonLat([lng, lat])),\r\n     });\r\n\r\n    console.log(point);\r\n    // const icon = new Icon({\r\n    //   color: '#4271AE',\r\n    //   crossOrigin: 'anonymous',\r\n    //   // src: 'data/dot.png'\r\n    // });\r\n\r\n    // point.setStyle(new Style({\r\n    //   image: icon\r\n    // }));\r\n\r\n    const source = new VectorSource({\r\n      features: [point]\r\n    });\r\n\r\n    const layer = new VectorLayer({\r\n      source\r\n    });\r\n\r\n    return layer;\r\n  }\r\n}\r\n","import Map from 'ol/Map';\nimport { fromLonLat, transformExtent, transform } from 'ol/proj';\n\nimport View from 'ol/View';\nimport { ImageAdapter } from './layer-adapters/ImageAdapter';\nimport { EventEmitter } from 'events';\nimport { OsmAdapter } from './layer-adapters/OsmAdapter';\nimport { MarkerAdapter } from './layer-adapters/markerAdapter';\n\ninterface LayerMem {\n  order: number;\n  layer: any;\n  onMap: boolean;\n}\n\nexport class OlMapAdapter { // implements MapAdapter {\n\n  static layerAdapters = {\n    IMAGE: ImageAdapter,\n    // TILE: TileAdapter,\n    // MVT: MvtAdapter,\n    OSM: OsmAdapter,\n    MARKER: MarkerAdapter\n  };\n\n  options;\n\n  displayProjection = 'EPSG:3857';\n  lonlatProjection = 'EPSG:4326';\n  emitter = new EventEmitter();\n\n  map: Map;\n\n  _layers: { [x: string]: LayerMem } = {};\n  private _olView: View;\n  private _order = 0;\n  private _length = 9999; // TODO: get real layers length count, after all registered\n\n  private DPI = 1000 / 39.37 / 0.28;\n  private IPM = 39.37;\n\n  // private _layers: {[name: string]: LayerMem} = {};\n\n  // create(options: MapOptions = {target: 'map'}) {\n  create(options = { target: 'map' }) {\n    this.options = Object.assign({}, options);\n    const view = new View({\n      center: [-9101767, 2822912],\n      zoom: 14,\n      projection: this.displayProjection,\n    });\n\n    const defOpt = {\n      logo: false,\n      controls: [],\n      view,\n      layers: [],\n    };\n    const mapInitOptions = { ...defOpt, ...options };\n\n    this.map = new Map(mapInitOptions);\n\n    this._olView = this.map.getView();\n\n    // olView.on('change:resolution', (evt) => {\n    //   this.set('resolution', olView.getResolution());\n    // });\n\n    // olView.on('change:center', (evt) => {\n    //   this.set('center', olView.getCenter());\n    // });\n\n    this._addMapListeners();\n  }\n\n  getContainer() {\n    return document.getElementById(this.options.target);\n  }\n\n  onMapLoad(cb?) {\n    return new Promise((resolve) => {\n      resolve(cb && cb());\n    });\n  }\n\n  setCenter(latLng: [number, number]) {\n    this._olView.setCenter(fromLonLat(latLng));\n  }\n\n  setZoom(zoom: number) {\n    this._olView.setZoom(zoom);\n  }\n\n  fit(e: [number, number, number, number]) {\n    const extent = transformExtent(\n      e,\n      this.lonlatProjection,\n      this.displayProjection,\n    );\n    this._olView.fit(extent);\n  }\n\n  setRotation(angle: number) {\n    this._olView.setRotation(angle);\n  }\n\n  getLayerAdapter(name: string) {\n    return OlMapAdapter.layerAdapters[name];\n  }\n\n  getLayer(layerName: string) {\n    return this._layers[layerName] !== undefined;\n  }\n\n  getLayers(): string[] {\n    return Object.keys(this._layers);\n  }\n\n  isLayerOnTheMap(layerName: string): boolean {\n    const layerMem = this._layers[layerName];\n    return layerMem.onMap;\n  }\n\n  addLayer(adapterDef, options?) {\n\n    let adapterEngine;\n    if (typeof adapterDef === 'string') {\n      adapterEngine = this.getLayerAdapter(adapterDef);\n    }\n    if (adapterEngine) {\n      const adapter = new adapterEngine(this.map, options);\n      const layer = adapter.addLayer(options);\n      const layerId = adapter.name;\n      this._layers[layerId] = { layer, order: options.order || this._order++, onMap: false };\n      this._length++;\n      return Promise.resolve(adapter);\n    }\n    return Promise.reject('No adapter');\n  }\n\n  removeLayer(layerName: string) {\n    // ignore\n  }\n\n  showLayer(layerName: string) {\n    this.toggleLayer(layerName, true);\n  }\n\n  hideLayer(layerName: string) {\n    this.toggleLayer(layerName, false);\n  }\n\n  setLayerOpacity(layerName: string, value: number) {\n    // ignore\n  }\n\n  getScaleForResolution(res, mpu) {\n    return parseFloat(res) * (mpu * this.IPM * this.DPI);\n  }\n\n  getResolutionForScale(scale, mpu) {\n    return parseFloat(scale) / (mpu * this.IPM * this.DPI);\n  }\n\n  toggleLayer(layerName: string, status: boolean) {\n    const action = (source: Map, l: LayerMem) => {\n      if (status) {\n        if (source instanceof Map) {\n          source.addLayer(l.layer);\n          l.layer.setZIndex(this._length - l.order);\n        }\n      } else {\n        source.removeLayer(l.layer);\n      }\n      l.onMap = status;\n    };\n    const layer = this._layers[layerName];\n    if (layer && layer.onMap !== status) {\n      action(this.map, layer);\n    }\n  }\n\n  addControl(controlDef, position: string) {\n    // ignore\n  }\n\n  onMapClick(evt) {\n    const [lng, lat] = transform(\n      evt.coordinate,\n      this.displayProjection,\n      this.lonlatProjection,\n    );\n    const latLng = {\n      lat, lng\n    };\n    this.emitter.emit('click', {\n      latLng,\n      pixel: {left: evt.pixel[0], top: evt.pixel[1]},\n      source: evt\n    });\n  }\n\n  private _addMapListeners() {\n    this.map.on('click', (evt) => {\n      this.onMapClick(evt);\n    });\n  }\n\n}\n"],"names":["layer","ID","fromLonLat","VectorLayer","EventEmitter","transformExtent"],"mappings":"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"}